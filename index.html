<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>éŸ³æ¨‚æ’­æ”¾æ¸…å–®</title>
</head>
<body>
  <h2>ğŸµ æˆ‘çš„éŸ³æ¨‚æ’­æ”¾å™¨</h2>
  <audio id="audioPlayer" controls autoplay></audio>
  <ul id="playlist"></ul>

  <script>
    let playlist = [];
    let current = 0;

    fetch('playlist.json')
      .then(res => res.json())
      .then(data => {
        playlist = data;
        if (playlist.length === 0) {
          document.body.innerHTML += "<p>æ‰¾ä¸åˆ°éŸ³æ¨‚æª”æ¡ˆ</p>";
          return;
        }
        playNext();
        let ul = document.getElementById('playlist');
        playlist.forEach((item, i) => {
          let li = document.createElement('li');
          li.textContent = item.name;
          ul.appendChild(li);
        });
      });

    function playNext() {
      const player = document.getElementById('audioPlayer');
      player.src = playlist[current].url;
      player.play().catch(() => {
        console.log("æ’­æ”¾å¤±æ•—ï¼Œè«‹æ‰‹å‹•æ’­æ”¾");
      });
      player.onended = () => {
        current = (current + 1) % playlist.length;
        playNext();
      };
    }
  </script>
</body>
</html>